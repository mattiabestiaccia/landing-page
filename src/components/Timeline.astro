---
interface Experience {
  title: string;
  company: string;
  period: string;
  description: string;
  technologies?: string[];
  current?: boolean;
}

interface Props {
  experiences?: Experience[];
}

const defaultExperiences: Experience[] = [
  {
    title: "AI Context Engineer",
    company: "Legodigit",
    period: "Dec 2025 - Present",
    description: "Comprehensive technical modernization of evodigit management software: security auditing and vulnerability assessment, Django 2.1 to 5.1 migration, Bootstrap 5 UI modernization, complete codebase refactoring with dead code removal, and extensive technical documentation across all modules.",
    technologies: ["Django", "Python", "Bootstrap 5", "Security Audit", "LLM Integration"],
    current: true
  },
  {
    title: "AI Workshop Instructor",
    company: "AI Explorers Lab - Bressanone",
    period: "Aug 2025 - Sep 2025",
    description: "Organized interactive AI workshops for elementary school children, introducing concepts of artificial intelligence, prompting, and creative LLM applications in an engaging and accessible way.",
    technologies: ["LLMs", "Education", "Prompt Engineering"]
  },
  {
    title: "Research Fellow",
    company: "University of Maryland Center for Environmental Science (UMCES)",
    period: "Feb 2025 - Jul 2025",
    description: "Conducted research on UAV image analysis and vegetation classification. Developed multiscale feature extraction methods using Wavelet Scattering Transform (WST) for classification via Random Forests. Forthcoming publication under review.",
    technologies: ["Python", "UAV Analysis", "Machine Learning", "Random Forests", "WST"]
  },
  {
    title: "Researcher & Intern",
    company: "Enrico Piaggio Research Centre, University of Pisa",
    period: "Feb 2023 - May 2024",
    description: "Worked on humanoid robot Abel, focusing on human-robot interaction and LLM-driven frameworks. Implemented deep learning algorithms (CNNs, inverse kinematics) for advanced facial robotics. Produced 3 publications on HRI and LLMs.",
    technologies: ["Python", "PyTorch", "CNNs", "LLMs", "Robotics"]
  }
];

const { experiences = defaultExperiences } = Astro.props;
---

<section id="experience" class="py-20">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section header -->
    <div class="text-center mb-16">
      <h2 class="text-3xl sm:text-4xl font-bold text-surface-900 dark:text-surface-100 mb-4">
        Work Experience
      </h2>
      <p class="text-lg text-surface-600 dark:text-surface-400 max-w-2xl mx-auto">
        My professional journey in the world of AI and Machine Learning.
      </p>
    </div>

    <!-- Timeline -->
    <div class="relative">
      <!-- Timeline line -->
      <div class="absolute left-4 md:left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b from-primary-500 via-accent-500 to-primary-500 transform md:-translate-x-1/2"></div>

      <!-- Timeline items -->
      <div class="space-y-12">
        {experiences.map((exp, index) => (
          <div class={`relative flex flex-col md:flex-row gap-8 ${index % 2 === 0 ? 'md:flex-row-reverse' : ''}`}>
            <!-- Timeline dot -->
            <div class="absolute left-4 md:left-1/2 w-4 h-4 rounded-full bg-primary-500 border-4 border-surface-50 dark:border-surface-950 transform -translate-x-1/2 md:-translate-x-1/2 z-10">
              {exp.current && (
                <span class="absolute inset-0 rounded-full bg-primary-500 animate-ping opacity-50"></span>
              )}
            </div>

            <!-- Content card -->
            <div class={`flex-1 ml-12 md:ml-0 ${index % 2 === 0 ? 'md:pr-12' : 'md:pl-12'}`}>
              <div class="p-6 rounded-2xl bg-surface-50 dark:bg-surface-800 border border-surface-200 dark:border-surface-700 hover:border-primary-400 dark:hover:border-primary-500 hover:shadow-lg transition-all">
                <!-- Period badge -->
                <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 text-sm font-medium mb-4">
                  {exp.current && (
                    <span class="relative flex h-2 w-2">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary-500 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-primary-600"></span>
                    </span>
                  )}
                  {exp.period}
                </div>

                <h3 class="text-xl font-bold text-surface-900 dark:text-surface-100 mb-1">
                  {exp.title}
                </h3>
                <p class="text-primary-600 dark:text-primary-400 font-medium mb-3">
                  {exp.company}
                </p>
                <p class="text-surface-600 dark:text-surface-400 mb-4">
                  {exp.description}
                </p>

                {exp.technologies && (
                  <div class="flex flex-wrap gap-2">
                    {exp.technologies.map((tech) => (
                      <span class="px-2 py-1 text-xs font-medium rounded-md bg-surface-200 dark:bg-primary-700 text-surface-800 dark:text-white">
                        {tech}
                      </span>
                    ))}
                  </div>
                )}
              </div>
            </div>

            <!-- Spacer for alternating layout -->
            <div class="hidden md:block flex-1"></div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>
